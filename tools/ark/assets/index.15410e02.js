import{l as e,y as t,a as n,b as o,N as r}from"./vendor.b0ce6166.js";function i(e){return e.start.getTime()+6e4*e.minutes}function u(e){return e>=0&&e<10?`0${e}`:e.toString()}function a(r){var i,a,c;const[l,s]=e((new Date).getTime());t((()=>{const e=setInterval((()=>{s((new Date).getTime())}),1e3);return()=>{clearInterval(e)}}),[]);const[d,m]=e((null==(i=r.counter)?void 0:i.name)||""),[x,f]=e((null==(a=r.counter)?void 0:a.minutes)||0);let g="?",p="transparent";if((null==(c=r.counter)?void 0:c.start)&&"number"==typeof x){const e=r.counter.start.getTime()+6e4*x-(new Date).getTime(),t=36e5*Math.floor(e/36e5),n=6e4*Math.floor((e-t)/6e4),o=1e3*Math.floor((e-t-n)/1e3);t>=0&&n>=0&&o>=0?(g=`${u(t/36e5)}:${u(n/6e4)}:${u(o/1e3)}`,t/36e5<1&&n/6e4<5&&(p="red")):(g="00:00:00",p="lightgreen")}return n("div",{style:{backgroundColor:p}},n("input",{placeholder:"Name",type:"text",value:d,onInput:function(e){m(e.currentTarget.value)}}),n("input",{placeholder:"Minutes",type:"number",min:"1",step:"1",value:x.toString(10),onInput:function(e){e.currentTarget.value&&f(parseInt(e.currentTarget.value,10))}}),n("button",{onClick:function(){if(r.counter){const e=r.counter;e.start=new Date,e.minutes=x,e.name=d,r.onSave(e)}else{const e={id:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),start:new Date,minutes:x,name:d};r.onSave(e)}}},r.onDelete?"Set":"Add"),r.onDelete&&n(o,null,n("button",{onClick:function(){r.onDelete&&r.counter&&r.onDelete(r.counter)}},"Delete"),n("span",null,g)))}function c(e){if(e.length){const t=JSON.stringify(e,d);localStorage.setItem("multitimers",t)}else localStorage.removeItem("multitimers")}const l=/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(([+-]\d\d:\d\d)|Z)?$/i;function s(e,t){return"string"==typeof t&&l.test(t)?new Date(t):t}function d(e,t){return"object"==typeof t&&null!==t&&"Date"===t.constructor.name?t.toISOString():t}r(n((function(){const[t,o]=e((new Date).getTime()),[r,u]=e(function(){const e=localStorage.getItem("multitimers");if(e)return JSON.parse(e,s);return[]}());function l(e){const t=r.slice(),n=t.findIndex(((t,n,o)=>t.id===e.id));-1===n?(t.push(e),o((new Date).getTime())):t[n]=e,u(t),c(t)}function d(e){const t=r.slice();if(e.id){const n=t.findIndex(((t,n,o)=>t.id===e.id));-1!==n&&t.splice(n,1)}u(t),c(t)}return n("div",null,n(a,{key:t,onSave:l}),n("button",{onClick:function(){u([]),c([])}},"Clear"),r.sort(((e,t)=>i(e)-i(t))).map((e=>n(a,{key:e.id,counter:e,onSave:l,onDelete:d}))))}),{}),document.getElementById("app"));
